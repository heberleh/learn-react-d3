(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(t,e,a){t.exports=a.p+"static/media/logo.5d5d9eef.svg"},19:function(t,e,a){t.exports=a(65)},24:function(t,e,a){},25:function(t,e,a){},29:function(t,e,a){},30:function(t,e,a){},63:function(t,e,a){},64:function(t,e,a){},65:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),r=a(13),c=a.n(r),l=a(2),o=a(3),s=a(5),u=a(4),d=a(6),h=(a(24),a(16)),b=a.n(h),m=(a(25),function(t){function e(){return Object(l.a)(this,e),Object(s.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"header d-flex justify-content-center align-self-stretch"},i.a.createElement("div",{className:" d-flex justify-content-center align-items-center"},i.a.createElement("img",{src:b.a,className:"logo",alt:"logo"}),i.a.createElement("span",null,this.props.title)),i.a.createElement("div",{className:"d-flex justify-content-right align-items-center"},i.a.createElement("span",{className:"author"},i.a.createElement("a",{href:this.props.authorUrl},this.props.author))))}}]),e}(n.Component)),p=(a(26),a(27),a(11)),f=(a(29),a(8)),g=a(18),v=a(17),O=(a(30),function(t){function e(){return Object(l.a)(this,e),Object(s.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){this.renderAxis()}},{key:"componentDidUpdate",value:function(){this.renderAxis()}},{key:"renderAxis",value:function(){var t="axis".concat(this.props.orient),e=g[t]().scale(this.props.scale).tickSize(-this.props.tickSize).tickPadding(this.props.tickPadding).ticks(this.props.ticks);Object(v.a)(this.axisElement).call(e)}},{key:"render",value:function(){var t=this;return i.a.createElement("g",{className:"Axis Axis-".concat(this.props.orient," Axis-").concat(this.props.scale.type),ref:function(e){t.axisElement=e},transform:this.props.translate})}}]),e}(n.Component));O.defaultProps={ticks:[4],tickPadding:[12]};var y=O,E=function(t){t.minSize;var e=t.scales,a=t.margins,n=t.svgDimensions,r=t.ticks,c=(t.dataModel,{orient:"Left",scale:e.yScale,translate:"translate(".concat(a.left,", 0)"),tickSize:n.width-a.left-a.right,ticks:r.y.ticks,tickPadding:r.y.tickPadding});return i.a.createElement("g",null,i.a.createElement(y,c))},k=a(7),j=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).colorScale=Object(f.b)().domain([0,a.props.maxValue/10,a.props.maxValue]).range(["#E8895B","#38397C","#10101C"]).interpolate(k.c),a}return Object(d.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this,e=this.props,a=e.scales,n=e.margins,r=e.dataModel,c=a.xScale,l=a.yScale;function o(t){return"<div style='max-width:200px'><b>"+r.bandFunc(t)+"</b><br>"+r.valueFunc(t)+"<br>Info: "+r.descriptionFunc(t)}var s=r.data.map(function(e){return i.a.createElement("rect",{key:r.bandFunc(e)+r.valueFunc(e),x:n.left,y:l(r.bandFunc(e)),width:0===r.valueFunc(e)?0:c(r.valueFunc(e)),height:l.bandwidth(),fill:t.colorScale(r.valueFunc(e)),skill:r.bandFunc(e),total:r.valueFunc(e),"data-tip":o(e),"data-for":"barTooltipBarChart","data-html":!0})});return i.a.createElement("g",null,s)}}]),e}(n.Component),S=a(9),x=function(t){return function(e){function a(t){var e;return Object(l.a)(this,a),(e=Object(s.a)(this,Object(u.a)(a).call(this,t))).state={containerWidth:null},e.fitParentContainer=e.fitParentContainer.bind(Object(S.a)(Object(S.a)(e))),e}return Object(d.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fitParentContainer(),window.addEventListener("resize",this.fitParentContainer)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.fitParentContainer)}},{key:"fitParentContainer",value:function(){var t=this.state.containerWidth,e=this.chartContainer.getBoundingClientRect().width;t!==e&&this.setState({containerWidth:e})}},{key:"renderChart",value:function(){var e=this.state.containerWidth;return i.a.createElement(t,Object.assign({},this.props,{width:e}))}},{key:"render",value:function(){var t=this,e=null!==this.state.containerWidth;return i.a.createElement("div",{ref:function(e){t.chartContainer=e},className:"Responsive-wrapper"},e&&this.renderChart())}}]),a}(n.Component)},w=a(10),L=a.n(w),C=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).xScale=Object(f.b)(),a.xScale.type="Linear",a.yScale=Object(f.a)(),a.yScale.type="Band",a}return Object(d.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this.props,e=Math.max.apply(Math,Object(p.a)(t.dataModel.data.map(function(e){return t.dataModel.valueFunc(e)}))),a=this.yScale.padding([.5]).domain(t.dataModel.data.map(function(e){return t.dataModel.bandFunc(e)})).range([t.height-t.margins.bottom,t.margins.top]),n=this.xScale.domain([0,e]).range([0,t.width-t.margins.right-t.margins.left]);return i.a.createElement("div",null,i.a.createElement("svg",{width:t.width,height:t.height},i.a.createElement(E,{scales:{xScale:n,yScale:a},margins:t.margins,svgDimensions:{width:t.width,height:t.height},ticks:{x:{ticks:[5],tickPadding:6},y:{ticks:[],tickPadding:12}},dataModel:t.dataModel}),i.a.createElement(j,{scales:{xScale:n,yScale:a},margins:t.margins,dataModel:t.dataModel,maxValue:e,svgDimensions:{width:t.width,height:t.height}})),i.a.createElement(L.a,{id:"barTooltipBarChart",html:!0,border:!0}))}}]),e}(n.Component);C.defaultProps={width:700,height:1200,margins:{top:50,right:20,bottom:100,left:200},parsPadding:.5};var F=x(C),M=a(46),P=function(){function t(){Object(l.a)(this,t)}return Object(o.a)(t,null,[{key:"charactersTotalSkills",value:function(){return{data:M.exec("SELECT c.char AS url, c.charLabel AS name, COUNT(DISTINCT a.ability) AS total                     FROM character c JOIN abilities a ON a.char = c.char                     GROUP BY c.char, c.charLabel                     ORDER BY total                     LIMIT 500"),bandFunc:function(t){return t.name},valueFunc:function(t){return t.total},urlFunc:function(t){return t.url}}}},{key:"skillsDistribution",value:function(){return{data:M.exec("SELECT LOWER (a.abilityLabel) AS ability, COUNT(c.char) AS total, a.abilityDescription AS description                     FROM character c JOIN abilities a ON a.char = c.char                     GROUP BY LOWER (a.abilityLabel), a.abilityDescription                     ORDER BY total"),bandFunc:function(t){return t.ability},valueFunc:function(t){return t.total},urlFunc:function(t){return t.url},descriptionFunc:function(t){return t.description}}}},{key:"skillsDistributionByGender",value:function(){var t=M.exec("SELECT LOWER (a.abilityLabel) AS abilityLabel,                            a.abilityDescription   AS description,                            LOWER (g.genderLabel)  AS genderLabel,                            COUNT(c.char)          AS total                     FROM character c \n                            JOIN      abilities a ON a.char = c.char                            LEFT JOIN gender    g ON c.char = g.char                     GROUP BY LOWER (a.abilityLabel), a.abilityDescription, LOWER (g.genderLabel)                     ORDER BY abilityLabel"),e={},a=new Set,n={};t.forEach(function(t){if(t.abilityLabel in e)e[t.abilityLabel].values[t.genderLabel]=t.total;else{var i={values:{},description:t.description};i.values[t.genderLabel]=t.total,e[t.abilityLabel]=i}!(t.genderLabel in a)&&a.add(t.genderLabel),t.genderLabel in a?n+=t.total:n[t.genderLabel]=t.total}),(a=Array.from(a)).sort(function(t,e){return n[e]-n[t]});var i=[];for(var r in e){var c={description:e[r].description,ability:r,values:[]};for(var l in a){var o=a[l];o in e[r].values?c.values.push(e[r].values[o]):c.values.push(0)}i.push(c)}return i.sort(function(t,e){return t.values.reduce(function(t,e){return t+e})-e.values.reduce(function(t,e){return t+e})}),{data:i,labels:a,bandFunc:function(t){return t.ability},valueFunc:function(t){return t.values},urlFunc:function(t){return""},descriptionFunc:function(t){return t.description}}}},{key:"findGenders",value:function(){return{data:M.exec("SELECT DISTINCT genderLabel from gender")}}}]),t}(),D=(a(63),function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).colorScale=Object(f.c)().domain(a.props.dataModel.labels).range(a.props.colorsVector),a}return Object(d.a)(e,t),Object(o.a)(e,[{key:"renderStackedBar",value:function(t){var e=this,a=this.props,n=a.scales,r=a.margins,c=a.dataModel,l=n.xScale,o=n.yScale,s=c.bandFunc(t),u=c.descriptionFunc(t),d=c.valueFunc(t),h=c.labels,b=d.reduce(function(t,e){return t+e});function m(t,e,a,n){return"<div style='max-width:300px'><b>"+t+" ("+e+")</b><br>"+a+"/"+b+" = "+parseInt(a/b*1e3,10)/10+"%<br>Info: "+n}function p(t){for(var e=0,a=0;a<t;a++)0!==d[a]&&(e+=l(d[a]));return e}return d.map(function(a,n){return 0===a?"":i.a.createElement("rect",{key:s+h[n]+a,val:a,values:d,scaleVal:l(a),getxval:p(n),marginleft:r.left,x:r.left+p(n),width:l(a),y:o(c.bandFunc(t)),height:o.bandwidth(),fill:e.colorScale(h[n]),"data-tip":m(s,h[n],a,u),"data-for":"barTooltipStackedBarChart","data-html":!0})})}},{key:"render",value:function(){var t=this,e=i.a.createElement("g",null,this.props.dataModel.data.map(function(e){return i.a.createElement("g",null,t.renderStackedBar(e))}));return i.a.createElement("g",null,e)}}]),e}(n.Component)),N=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).xScale=Object(f.b)(),a.xScale.type="Linear",a.yScale=Object(f.a)(),a.yScale.type="Band",a}return Object(d.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this.props,e=Math.max.apply(Math,Object(p.a)(t.dataModel.data.map(function(e){return t.dataModel.valueFunc(e).reduce(function(t,e){return t+e})}))),a=this.yScale.padding([.5]).domain(t.dataModel.data.map(function(e){return t.dataModel.bandFunc(e)})).range([t.height-t.margins.bottom,t.margins.top]),n=this.xScale.domain([0,e]).range([0,t.width-t.margins.right-t.margins.left]);return i.a.createElement("div",null,i.a.createElement("svg",{width:t.width,height:t.height},i.a.createElement(E,{scales:{xScale:n,yScale:a},margins:t.margins,svgDimensions:{width:t.width,height:t.height},ticks:{x:{ticks:[6],tickPadding:12},y:{ticks:[6],tickPadding:12}},dataModel:t.dataModel}),i.a.createElement(D,{colorsVector:["#2a2b83","#ac4a59","#5cb5d8","#61f574","#f17341"],scales:{xScale:n,yScale:a},margins:t.margins,dataModel:t.dataModel,maxValue:e,svgDimensions:{width:t.width,height:t.height}})),i.a.createElement(L.a,{id:"barTooltipStackedBarChart",html:!0,border:!0}))}}]),e}(n.Component);N.defaultProps={width:700,height:1200,margins:{top:50,right:20,bottom:100,left:200},parsPadding:.5};var R=x(N),A=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).title="D3 & React - Comics Abilities",a.author="Henry Heberle",a.authorUrl="https://heberleh.github.io",a}return Object(d.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(m,{title:this.title,author:this.author,authorUrl:this.authorUrl}),i.a.createElement("div",{class:"row"},i.a.createElement("div",{class:"col-md-3"},i.a.createElement(F,{dataModel:P.skillsDistribution()})),i.a.createElement("div",{class:"col-md-9"},i.a.createElement(R,{dataModel:P.skillsDistributionByGender()}))))}}]),e}(n.Component);a(64);c.a.render(i.a.createElement(A,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.0cb4bd49.chunk.js.map